# Шаги для деплоя Итерации 1

## 1. Применить миграцию базы данных

Выполните миграцию для создания таблиц пользователей, задач и тегов:

```bash
npm run db:migrate
```

Эта команда применит миграцию `0002_tasks_and_users.sql` к удалённой базе данных.

## 2. Собрать и задеплоить приложение

```bash
npm run deploy
```

Эта команда:
- Соберёт фронтенд (React + Vite)
- Задеплоит Cloudflare Worker с новыми API endpoints

## 3. Проверка работы API

После деплоя можно проверить работу API:

### Тестовый endpoint (без авторизации):
```bash
curl https://planer.moldahasank.workers.dev/api/test
```

### Получить список задач (требуется авторизация):
```bash
curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  https://planer.moldahasank.workers.dev/api/tasks/list
```

### Получить список тегов (требуется авторизация):
```bash
curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  https://planer.moldahasank.workers.dev/api/tags
```

## 4. Что реализовано в Итерации 1

### Backend (Cloudflare Worker):
- ✅ Таблицы: `users`, `tasks`, `tags`, `task_tags`
- ✅ Middleware для работы с пользователями (Firebase UID → User ID)
- ✅ API для задач (CRUD): `/api/tasks/*`
- ✅ API для тегов (CRUD): `/api/tags/*`
- ✅ Фильтрация задач по статусу, приоритету, тегам, поиску, датам
- ✅ Мягкое и жёсткое удаление задач

### Frontend (React):
- ✅ React Router с защищёнными маршрутами
- ✅ TasksContext для управления состоянием
- ✅ API клиент для работы с задачами и тегами
- ✅ Страницы: Сегодня, Неделя, Месяц, Календарь, Расшаренные, Теги, Настройки
- ✅ Компоненты:
  - TaskCard — карточка задачи с отображением всех полей
  - TaskDialog — форма создания/редактирования задачи
- ✅ Главный экран с лентой задач на сегодня
- ✅ Создание, редактирование, удаление задач
- ✅ Изменение статуса задачи (чекбокс)
- ✅ Отображение тегов, приоритетов, дат

## 5. Следующие шаги (Итерация 2)

- Визуальный календарь с интеграцией
- Эндпоинт для получения задач по диапазону дат для календаря
- Компонент календаря с отображением задач

## 6. Следующие шаги (Итерация 3)

- Таблицы для повторяющихся задач: `recurrences`, `task_instances`
- Логика генерации инстансов "на лету"
- UI для настройки периодичности задач

## 7. Следующие шаги (Итерация 4)

- Таблица `task_shares` для шаринга задач
- API для шаринга задач с друзьями
- UI для управления доступом к задачам

